(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{1017:function(e,t,n){"use strict";n(773)},1267:function(e,t,n){"use strict";n.r(t);n(1017);var r=n(789),a=n.n(r),l=n(0),u=n.n(l),i=n(90);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.default=Object(i.inject)("systemRoleStore")(Object(i.observer)((function(e){return u.a.createElement(a.a,o({},e,{bgroup:"gittok",__source:{fileName:"/Users/limingliang/xcode-xpack/web/thoughtware-gittok-ui/src/setting/user/SystemRole.js",lineNumber:12,columnNumber:12}}))})))},196:function(e,t){function n(){return e.exports=n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,n.apply(this,arguments)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},666:function(e,t,n){"use strict";var r=n(19);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BaseModal",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"BreadCrumb",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"Btn",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"ListAction",{enumerable:!0,get:function(){return c.ListAction}}),Object.defineProperty(t,"Page",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"Profile",{enumerable:!0,get:function(){return u.default}});var a=r(n(720)),l=r(n(723)),u=r(n(725)),i=r(n(727)),o=r(n(702)),c=n(729)},698:function(e,t,n){"use strict";n.r(t)},702:function(e,t,n){"use strict";var r=n(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(51);var a=r(n(29)),l=r(n(0));n(721);t.default=function(e){var t=e.icon,n=e.type,r=e.title,u=e.onClick,i=e.isMar,o=e.children;return l.default.createElement("div",{className:"privilege-btn ".concat(n?"privilege-btn-".concat(n):""," ").concat(i?"privilege-btn-mar":""),onClick:u},l.default.createElement(a.default,null,t&&l.default.createElement("span",{className:"privilege-btn-icon"},t),o||r))}},704:function(e,t,n){"use strict";var r=n(19);Object.defineProperty(t,"__esModule",{value:!0}),t.links=t.deleteSuccessReturnCurrenPage=void 0;var a=r(n(35));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.links=function(e,t){var n=[];return function e(r,a){r&&r.map((function(r){if(r.children){var l=r.children.map((function(e){return u(u({},e),{},{type:r[t]})}));e(l,n)}else a.push(r)}))}(e,n),n},t.deleteSuccessReturnCurrenPage=function(e,t,n){return e>=n*t?n:e<=(n-1)*t+1?1===n?1:n-1:n}},710:function(e,t){e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},714:function(e,t,n){"use strict";var r=n(19),a=n(45);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(62);var l=r(n(41)),u=r(n(198)),i=r(n(35)),o=r(n(197)),c=r(n(42));n(200);var d=r(n(55)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(0)),s=n(6),p=n(666);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(698);var y=d.default.Group;t.default=function(e){var t=e.roleDetail,n=e.isBase,r=e.type,a=(0,f.useState)(!1),i=(0,c.default)(a,2),m=i[0],v=i[1],b=(0,f.useState)([]),h=(0,c.default)(b,2),O=h[0],E=h[1],w=(0,f.useState)({}),P=(0,c.default)(w,2),j=P[0],_=P[1],k=(0,f.useState)([]),x=(0,c.default)(k,2),S=x[0],R=x[1],M=[{title:"模块",key:"label",width:"30%",render:function(e){return f.default.createElement(d.default,{disabled:!m,indeterminate:e.indeterminate,onChange:function(t){return T(t,e)},checked:e.checkAll},e.label)}},{title:"功能点",key:"name",render:function(e){return f.default.createElement("div",{className:"privilege-role-promise"},f.default.createElement(y,{disabled:!m,options:j[e.value],value:e.checkedList,onChange:function(t){return A(t,e)}}))}}];(0,f.useEffect)((function(){null!=t&&t.id&&I()}),[null==t?void 0:t.id]);var I=function(){var e;e="system"===r?{group:null==t?void 0:t.group}:{type:"2"},s.Axios.post("/function/findFunctionList",e).then((function(e){if(!e.code){var t=C(e.data);E(t.result),_(t.resultChild),N(!0,t.result,t.resultChild)}}))},C=function(e){var t=e.map((function(e){return!e.parentFunction&&{value:e.id,label:e.name}})).filter(Boolean),n=e.map((function(e){return e.parentFunction&&e.parentFunction.id&&{value:e.id,label:e.name,parent:e.parentFunction.id}})).filter(Boolean),r=[],a={};return t.forEach((function(e){var t=e.value,l=n.filter((function(e){return e.parent===t}));r.push({value:e.value,label:e.label,indeterminate:!1,checkedList:[],checkAll:!1}),a[e.value]=l})),{result:r,resultChild:a}},D=function(e){var t=e.filter((function(e){return e.function&&e.function.parentFunction})).map((function(e){return{parentID:e.function.parentFunction.id,id:e.function.id}})),n=e.filter((function(e){return!e.function.parentFunction})).map((function(e){return e.function.id})),r={};return n.forEach((function(e){var n=t.map((function(t){if(t.parentID===e)return t.id})).filter(Boolean);r[e]=[].concat((0,o.default)(n),[e])})),r},N=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={roleId:"domain"===r?t.role.id:t.id};s.Axios.post("roleFunction/findRoleFunctionList",l).then((function(t){if(!t.code){var r=D(t.data),l=e?a:j,u=(e?n:O).map((function(e){var t=r[e.value]?r[e.value]:[],n=0===l[e.value].length,a=t.length===l[e.value].length+1&&0!==t.length,u=a?!a:!!t.length&&t.length<l[e.value].length+1;return n&&1===t.length&&(a=!0,u=!1),g(g({},e),{},{checkedList:t,indeterminate:u,checkAll:a})}));E(u),R(t.data.map((function(e){return e.function.id})))}}))},A=function(e,t){L(e,t)},L=function(e,t){var n=O.map((function(n){if(n.value===t.value){if(0===e.length)return B(t,"delete"),g(g({},n),{},{checkedList:[],checkAll:!1,indeterminate:!1});if(e.length===j[t.value].length)return B(t,"add"),g(g({},n),{},{checkedList:e,checkAll:!0,indeterminate:!1});if(e.length<j[t.value].length)return B(t,"filterAdd",e),g(g({},n),{},{checkedList:e,checkAll:!1,indeterminate:!0})}return n}));E(n)},B=function(e,t,n){var r,a=j[e.value].map((function(e){return e.value})).filter(Boolean),l=[].concat((0,o.default)(a),[e.value]);if("add"===t)r=Array.from(new Set([].concat((0,o.default)(S),(0,o.default)(l))));else if("delete"===t)r=S.filter((function(e){return!l.includes(e)}));else{var u=S.filter((function(e){return!a.includes(e)}));r=Array.from(new Set([].concat((0,o.default)(u),(0,o.default)(n),[e.value])))}R(r)},T=function(e,t){var n=S.includes(t.value),r=O.map((function(e){if(e.value===t.value){if(B(t,n?"delete":"add"),n)return g(g({},e),{},{checkedList:[],checkAll:!1,indeterminate:!1});var r=j[t.value].map((function(e){return e.value})).filter(Boolean);return g(g({},e),{},{checkedList:r,checkAll:!0,indeterminate:!1})}return e}));E(r)},W=function(){N(),v(!1)},z=function(){var e={role:{id:"domain"===r?t.role.id:t.id},functionList:S};s.Axios.post("roleFunction/updateRoleAllFunction",e).then((function(e){0===e.code&&N(),v(!1)}))};return f.default.createElement("div",{className:"thoughtware_role_promisse"},m?f.default.createElement("div",{className:"thoughtware_role_promisse_up"},f.default.createElement(p.Btn,{onClick:W,isMar:!0},"取消"),f.default.createElement(p.Btn,{type:"primary",onClick:z},"保存")):(n||2!==t.businessType)&&f.default.createElement("div",{className:"thoughtware_role_promisse_up"},f.default.createElement(p.Btn,{onClick:function(){return v(!0)},icon:f.default.createElement(u.default,null)},"编辑")),f.default.createElement("div",{className:"thoughtware_role_promisse_table"},f.default.createElement(l.default,{pagination:!1,columns:M,dataSource:O,rowKey:function(e){return e.value},bordered:!0})),m&&f.default.createElement("div",{className:"thoughtware_role_promisse_bottom"},f.default.createElement(p.Btn,{onClick:W,isMar:!0},"取消"),f.default.createElement(p.Btn,{type:"primary",onClick:z},"保存")))}},715:function(e,t,n){"use strict";var r=n(19),a=n(45);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n(81));n(62);var u=r(n(41)),i=r(n(136));n(150);var o=r(n(124)),c=r(n(506));n(51);var d=r(n(29));n(60);var f=r(n(26)),s=r(n(82)),p=r(n(35)),m=r(n(42)),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=P(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(0)),g=n(90),y=n(666),b=n(704),h=n(153),O=r(n(743)),E=r(n(744)),w=r(n(745));function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(P=function(e){return e?n:t})(e)}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,p.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(698);t.default=(0,g.inject)(h.SYSTEM_ROLE_STORE,h.PRIVILEGE_DOMAIN_ROLE_STORE)((0,g.observer)((function(e){var t=e.domainId,n=e.roleType,r=e.roleDetail,a=e.systemRoleStore,p=e.privilegeDomainRoleStore,g=a.findRoleUserPage,h=a.findRoleOrgaPage,P=a.findRoleUserGroupPage,j=a.findRoleUserList,k=a.findRoleOrgaList,x=a.findRoleUserGroupList,S=a.createBatchRoleUser,R=a.createBatchRoleUserGroup,M=a.createBatchRoleOrga,I=a.deleteRoleOrga,C=a.deleteRoleUserGroup,D=a.deleteRoleUser,N=p.findDmRoleUserListAction,A=p.createBatchDmRoleUserAction,L=p.deleteDmRoleUserAction,B={pageSize:10,currentPage:1},T=(0,v.useState)(!1),W=(0,m.default)(T,2),z=W[0],K=W[1],F=(0,v.useState)("all"),U=(0,m.default)(F,2),G=U[0],V=U[1],J=(0,v.useState)({pageParam:B}),Y=(0,m.default)(J,2),q=Y[0],H=Y[1],Z=(0,v.useState)({}),$=(0,m.default)(Z,2),Q=$[0],X=$[1],ee=(0,v.useState)({}),te=(0,m.default)(ee,2),ne=te[0],re=te[1],ae=(0,v.useState)(null),le=(0,m.default)(ae,2),ue=le[0],ie=le[1],oe=(0,v.useState)([]),ce=(0,m.default)(oe,2),de=ce[0],fe=ce[1],se=(0,v.useState)([]),pe=(0,m.default)(se,2),me=pe[0],ve=pe[1];(0,v.useEffect)((function(){if("user"===ue){if("domain"===n){var e=ne.dataList;return fe(e.map((function(e){var t;return null==e||null===(t=e.user)||void 0===t?void 0:t.id}))),void ve(e.map((function(e){var t;return null==e||null===(t=e.user)||void 0===t?void 0:t.id})))}j(r.id).then((function(e){0===e.code&&(fe(e.data.map((function(e){return null==e?void 0:e.id}))),ve(e.data.map((function(e){return null==e?void 0:e.id}))))}))}"group"===ue&&x({roleId:r.id}).then((function(e){0===e.code&&(fe(e.data.map((function(e){var t;return null==e||null===(t=e.userGroup)||void 0===t?void 0:t.id}))),ve(e.data.map((function(e){var t;return null==e||null===(t=e.userGroup)||void 0===t?void 0:t.id}))))})),"orga"===ue&&k({roleId:r.id}).then((function(e){0===e.code&&(fe(e.data.map((function(e){var t;return null==e||null===(t=e.orga)||void 0===t?void 0:t.orgaId}))),ve(e.data.map((function(e){var t;return null==e||null===(t=e.orga)||void 0===t?void 0:t.orgaId}))))}))}),[ue]),(0,v.useEffect)((function(){ge()}),[G,q]);var ge=function(){if(K(!0),"domain"===n)return ye();if(2===(null==r?void 0:r.businessType))return he();switch(G){case"all":return be();case"user":return he();case"orga":return Oe();default:return Ee()}},ye=function(){N({dmRoleId:r.id}).then((function(e){if(0===e.code){var t=e.data;X(t),re({dataList:t.slice(0,10),totalPage:Math.ceil(t.length/10),totalRecord:t.length||1,currentPage:1})}K(!1)}))},be=function(){j(r.id).then((function(e){if(0===e.code){var t=e.data;X(t),re({dataList:t.slice(0,10),totalPage:Math.ceil(t.length/10),totalRecord:t.length||1,currentPage:1})}K(!1)}))},he=function(){g(_(_({},q),{},{roleId:r.id})).then((function(e){0===e.code&&re(e.data),K(!1)}))},Oe=function(){h(_(_({},q),{},{roleId:r.id})).then((function(e){0===e.code&&re(e.data),K(!1)}))},Ee=function(){P(_(_({},q),{},{roleId:r.id})).then((function(e){0===e.code&&re(e.data),K(!1)}))},we=function(e){V(e),H({pageParam:B}),re({})},Pe=function(){var e=(0,s.default)(l.default.mark((function e(t){var r,a,u;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("domain"!==n){e.next=3;break}return L(t).then((function(e){0===e.code?(ye(),f.default.info("删除成功")):f.default.error(a.msg)})),e.abrupt("return");case 3:if((r=new FormData).append("id",t),"user"!==G){e.next=11;break}return e.next=8,D(r);case 8:a=e.sent,e.next=20;break;case 11:if("orga"!==G){e.next=17;break}return e.next=14,I(r);case 14:a=e.sent,e.next=20;break;case 17:return e.next=19,C(r);case 19:a=e.sent;case 20:0===a.code?(u=(0,b.deleteSuccessReturnCurrenPage)(ne.totalRecord,10,q.pageParam.currentPage),je(u),f.default.info("删除成功")):f.default.error(a.msg);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(e){if("domain"===n||"all"===G)return a=(r=10*((t=e)-1))+10,void re(_(_({},ne),{},{currentPage:t,dataList:null==Q?void 0:Q.slice(r,a)}));var t,r,a;H({pageParam:{pageSize:10,currentPage:e}})},_e=function(){var e=(0,s.default)(l.default.mark((function e(){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("user"!==ue){e.next=12;break}if("domain"!==n){e.next=7;break}return e.next=4,A({dmRole:{id:r.id},domainId:t,userIds:de});case 4:a=e.sent,e.next=10;break;case 7:return e.next=9,S({role:{id:r.id},userList:de});case 9:a=e.sent;case 10:e.next=21;break;case 12:if("orga"!==ue){e.next=18;break}return e.next=15,M({role:{id:r.id},orgaIdList:de});case 15:a=e.sent,e.next=21;break;case 18:return e.next=20,R({role:{id:r.id},userGroupIdList:de});case 20:a=e.sent;case 21:0===a.code?(ge(),f.default.info("添加成功")):f.default.error(a.msg),ke();case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(){fe([]),ve([]),ie(null)},xe=[{title:"姓名",dataIndex:["user","nickname"],key:["user","nickname"],width:"25%",ellipsis:!0,render:function(e,t){return v.default.createElement(d.default,null,v.default.createElement(y.Profile,{userInfo:null==t?void 0:t.user}),e||"--")}},{title:"用户名",dataIndex:["user","name"],key:["user","name"],width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:"手机号",dataIndex:["user","phone"],key:["user","phone"],width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:"邮箱",dataIndex:["user","email"],key:["user","email"],width:"25%",ellipsis:!0,render:function(e){return e||"--"}},{title:"操作",dataIndex:"action",key:"action",width:"10%",render:function(e,t){return 2!==(null==r?void 0:r.businessType)&&v.default.createElement(y.ListAction,{del:function(){return Pe(t.id)}})}}],Se={all:[{title:"姓名",dataIndex:"nickname",key:"nickname",width:"25%",ellipsis:!0,render:function(e,t){return v.default.createElement(d.default,null,v.default.createElement(y.Profile,{userInfo:t}),e||"--")}},{title:"用户名",dataIndex:"name",key:"name",width:"25%",ellipsis:!0,render:function(e){return e||"--"}},{title:"手机号",dataIndex:"phone",key:"phone",width:"25%",ellipsis:!0,render:function(e){return e||"--"}},{title:"邮箱",dataIndex:"email",key:"email",width:"25%",ellipsis:!0,render:function(e){return e||"--"}}],user:xe,orga:[{title:"名称",dataIndex:["orga","orgaName"],key:["orga","orgaName"],width:"80%",ellipsis:!0},{title:"操作",dataIndex:"action",key:"action",width:"20%",render:function(e,t){return v.default.createElement(y.ListAction,{del:function(){return Pe(t.id)}})}}],group:[{title:"名称",dataIndex:["userGroup","name"],key:["userGroup","name"],width:"60%",ellipsis:!0},{title:"名称",dataIndex:["userGroup","group"],key:["userGroup","group"],width:"30%",ellipsis:!0,render:function(e){return"system"===e?"内置":"自定义"}},{title:"操作",dataIndex:"action",key:"action",width:"20%",render:function(e,t){return v.default.createElement(y.ListAction,{del:function(){return Pe(t.id)}})}}]};return v.default.createElement("div",{className:"thoughtware_promisse"},2===(null==r?void 0:r.businessType)?null:"system"===n?v.default.createElement("div",{className:"thoughtware_promisse_up"},v.default.createElement("div",{className:"thoughtware_promisse_tab"},v.default.createElement("div",{className:"".concat("all"===G?"thoughtware_promisse_tab_active":""),onClick:function(){return we("all")}},"全部"),v.default.createElement("div",{className:"".concat("user"===G?"thoughtware_promisse_tab_active":""),onClick:function(){return we("user")}},"用户"),v.default.createElement("div",{className:"".concat("orga"===G?"thoughtware_promisse_tab_active":""),onClick:function(){return we("orga")}},"部门"),v.default.createElement("div",{className:"".concat("group"===G?"thoughtware_promisse_tab_active":""),onClick:function(){return we("group")}},"用户组")),v.default.createElement(o.default,{overlay:v.default.createElement("div",{className:"promisse_user_add"},v.default.createElement("div",{onClick:function(){return ie("user")}},"添加用户"),v.default.createElement("div",{onClick:function(){return ie("orga")}},"添加部门"),v.default.createElement("div",{onClick:function(){return ie("group")}},"添加用户组")),placement:"bottomRight",trigger:["click"],getPopupContainer:function(e){return e.parentElement}},v.default.createElement("div",null,v.default.createElement(y.Btn,{type:"primary",icon:v.default.createElement(c.default,null)},"添加成员")))):v.default.createElement("div",{className:"thoughtware_promisse_up"},v.default.createElement("div",{className:"thoughtware_promisse_tab"},v.default.createElement("div",null,"用户(",(null==Q?void 0:Q.length)||0,")")),v.default.createElement("div",null,v.default.createElement(y.Btn,{type:"primary",icon:v.default.createElement(i.default,null),onClick:function(){return ie("user")}},"添加用户"))),v.default.createElement("div",{className:"thoughtware_promisse_person"},v.default.createElement(u.default,{loading:z,columns:"domain"===n||2===(null==r?void 0:r.businessType)?xe:Se[G],dataSource:(null==ne?void 0:ne.dataList)||[],rowKey:function(e){return e.id},pagination:!1}),v.default.createElement(y.Page,{currentPage:null==ne?void 0:ne.currentPage,changPage:je,page:ne})),v.default.createElement(O.default,{domainId:t,visible:"user"===ue,roleType:n,allSelectIds:me,selectedRowKeys:de,setSelectedRowKeys:fe,handleOk:_e,handleCancel:ke}),v.default.createElement(E.default,{visible:"orga"===ue,allSelectIds:me,selectedRowKeys:de,setSelectedRowKeys:fe,handleOk:_e,handleCancel:ke}),v.default.createElement(w.default,{visible:"group"===ue,allSelectIds:me,selectedRowKeys:de,setSelectedRowKeys:fe,handleOk:_e,handleCancel:ke}))})))},720:function(e,t,n){"use strict";var r=n(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(149);var a=r(n(123)),l=r(n(196)),u=r(n(151)),i=r(n(0)),o=r(n(702));n(722);var c=["children"];t.default=function(e){var t=e.children,n=(0,u.default)(e,c),r=i.default.createElement(i.default.Fragment,null,i.default.createElement(o.default,{onClick:n.onCancel,title:"取消",isMar:!0}),i.default.createElement(o.default,{onClick:n.onOk,title:"确定",type:"primary"}));return i.default.createElement(a.default,(0,l.default)({style:{maxWidth:"calc(100vw - 120px)",maxHeight:"calc(100vh - 120px)",marginRight:"auto",marginLeft:"auto",position:"absolute",top:60,right:0,left:0,height:"100%",display:"flex",flexDirection:"column"},wrapClassName:"thoughtware_privilege_modal",closable:!1,destroyOnClose:!0,footer:r},n),t)}},721:function(e,t,n){"use strict";n.r(t)},722:function(e,t,n){"use strict";n.r(t)},723:function(e,t,n){"use strict";var r=n(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(51);var a=r(n(29)),l=r(n(221)),u=r(n(0));n(724);t.default=function(e){var t=e.firstItem,n=e.secondItem,r=e.children,i=e.onClick;return u.default.createElement("div",{className:"privilege-breadcrumb"},u.default.createElement(a.default,null,u.default.createElement("span",{className:i?"privilege-breadcrumb-first":"",onClick:i},i&&u.default.createElement(l.default,{style:{marginRight:8}}),u.default.createElement("span",{className:n?"privilege-breadcrumb-span":""},t)),n&&u.default.createElement("span",null," /   ",n)),u.default.createElement("div",null,r))}},724:function(e,t,n){"use strict";n.r(t)},725:function(e,t,n){"use strict";var r=n(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(309));n(199);var l=r(n(104)),u=r(n(0)),i=n(6);n(726);t.default=function(e){var t=e.userInfo,n=void 0===t?void 0:t,r=n||(0,i.getUser)();return u.default.createElement("div",{className:"thoughtware-profile"},r.avatar&&"null"!==r.avatar?u.default.createElement(l.default,{src:r.avatar}):r.nickname&&"null"!==r.nickname?u.default.createElement(l.default,null,r.nickname.substring(0,1)):r.name&&"null"!==r.name?u.default.createElement(l.default,null,r.name.substring(0,1)):u.default.createElement(l.default,{size:32,icon:u.default.createElement(a.default,null)}))}},726:function(e,t,n){"use strict";n.r(t)},727:function(e,t,n){"use strict";var r=n(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(306)),l=r(n(221)),u=r(n(0));n(728);t.default=function(e){var t=e.currentPage,n=e.changPage,r=e.page,i=r.totalPage,o=void 0===i?1:i,c=r.totalRecord,d=void 0===c?1:c;return o>1&&u.default.createElement("div",{className:"privilege-page"},u.default.createElement("div",{className:"".concat(1===t?"privilege-page-ban":"privilege-page-allow"),onClick:function(){return 1===t?null:n(t-1)}},u.default.createElement(l.default,null)),u.default.createElement("div",{className:"privilege-page-current"},t),u.default.createElement("div",{className:"privilege-page-line"}," / "),u.default.createElement("div",null,o),u.default.createElement("div",{className:"".concat(t===o?"privilege-page-ban":"privilege-page-allow"),onClick:function(){return t===o?null:n(t+1)}},u.default.createElement(a.default,null)),u.default.createElement("div",{className:"privilege-page-record"},"  共",d,"条 "))}},728:function(e,t,n){"use strict";n.r(t)},729:function(e,t,n){"use strict";var r=n(19);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ListAction",{enumerable:!0,get:function(){return a.default}});var a=r(n(730))},730:function(e,t,n){"use strict";var r=n(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(150);var a=r(n(124)),l=r(n(137));n(149);var u=r(n(123));n(103);var i=r(n(59)),o=r(n(198)),c=r(n(0));n(731);t.default=function(e){var t=e.edit,n=e.del;return c.default.createElement("span",{className:"privilege-listAction"},t&&c.default.createElement(i.default,{title:"修改"},c.default.createElement("span",{onClick:t,className:"edit",style:{cursor:"pointer",marginRight:15}},c.default.createElement(o.default,{style:{fontSize:16}}))),n&&c.default.createElement(a.default,{overlay:c.default.createElement("div",{className:"privilege-dropdown-more"},c.default.createElement("div",{className:"dropdown-more-item",onClick:function(){u.default.confirm({title:"确定删除吗？",content:c.default.createElement("span",{style:{color:"#f81111"}},"删除后无法恢复！"),okText:"确认",cancelText:"取消",onOk:function(){n()},onCancel:function(){}})}},"删除")),trigger:["click"],placement:"bottomRight"},c.default.createElement(i.default,{title:"更多"},c.default.createElement("span",{className:"del",style:{cursor:"pointer"}},c.default.createElement(l.default,{style:{fontSize:17}})))))}},731:function(e,t,n){"use strict";n.r(t)},738:function(e,t,n){"use strict";var r=n(19),a=n(45);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(43);var l=r(n(18)),u=r(n(35));n(57);var i=r(n(15)),o=r(n(42)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(0)),d=n(46),f=n(6),s=n(666);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,u.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(e){var t=(0,d.useTranslation)().t,n=e.visible,r=e.setVisible,a=e.findRole,u=e.isBase,p=e.urlType,m=void 0===p?"system":p;if(!["system","project"].includes(m))throw Error("use RoleAdd Component must have urlType props, value:'system'、 'project'");var g=i.default.useForm(),y=(0,o.default)(g,1)[0],b=function(){y.resetFields(),r(!1)};return c.default.createElement(s.BaseModal,{title:t("privilege-role.addRole"),visible:n,onCancel:b,onOk:function(){y.submit()},forceRender:!0,destroyOnClose:!0},c.default.createElement(i.default,{form:y,preserve:!1,onFinish:function(e){var t=v(v({},e),{},{group:u?"system":"custom",type:"system"===m?"1":"2"});f.Axios.post("/role/createRole",t).then((function(e){0===e.code&&(b(),a())}))},layout:"vertical"},c.default.createElement(i.default.Item,{label:t("privilege-role.roleName"),name:"name",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},c.default.createElement(l.default,{placeholder:t("privilege-role.roleName")})),c.default.createElement(i.default.Item,{label:t("privilege-desc"),name:"desc"},c.default.createElement(l.default,{placeholder:t("privilege-desc")}))))}},739:function(e,t,n){"use strict";var r=n(19),a=n(45);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n(196));n(43);var u=r(n(18)),i=r(n(35)),o=r(n(42));n(775);var c=r(n(774)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(0)),f=n(666),s=r(n(714)),p=r(n(715)),m=n(6);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(698);var b=c.default.TabPane;t.default=function(e){var t=e.roleType,n=e.isBase,r=e.roleDetailParams,a=e.setDetail,v=e.findRole,g=(0,d.useState)(null),h=(0,o.default)(g,2),O=h[0],E=h[1],w=function(e,t){if(E(null),r[t]!==e.target.value)if(e.target.value||"name"!==t){var n=(0,i.default)({id:r.id},t,e.target.value);"name"===t&&(n.desc=null==r?void 0:r.desc),"desc"===t&&(n.name=null==r?void 0:r.name),m.Axios.post("/role/updateRole",n).then((function(n){0===n.code&&(a(y(y({},r),{},(0,i.default)({},t,e.target.value))),v())}))}else a(r)};return d.default.createElement("div",{className:"thoughtware_system_role_detail"},d.default.createElement(f.BreadCrumb,{firstItem:r.name||"权限详情",onClick:function(){return a(null)}}),d.default.createElement("div",{className:"detail-title"},d.default.createElement("div",{className:"label_item"},d.default.createElement("div",null,"名称"),d.default.createElement("div",null,d.default.createElement(u.default,{bordered:"name"===O,defaultValue:r.name,disabled:2===r.businessType,className:"".concat("name"===O?"":"label_item_name"),onFocus:function(){return E("name")},onBlur:function(e){return w(e,"name")},onPressEnter:function(e){return e.target.blur()}}))),d.default.createElement("div",{className:"label_item"},d.default.createElement("div",null,"类型"),d.default.createElement("div",{className:"label_item_type"},"system"===r.group?"内置":"自定义"))),d.default.createElement("div",{className:"label_item label_desc"},d.default.createElement("div",null,"描述"),d.default.createElement("div",null,d.default.createElement(u.default.TextArea,{bordered:"desc"===O,defaultValue:r.desc,disabled:2===r.businessType,className:"".concat("desc"===O?"":"label_item_name"),onFocus:function(){return E("desc")},onBlur:function(e){return w(e,"desc")},autoSize:{minRows:1,maxRows:4}}))),d.default.createElement(c.default,{defaultActiveKey:"people"},d.default.createElement(b,{tab:"成员",key:"people"},d.default.createElement(p.default,(0,l.default)({},e,{roleType:t,roleDetail:r}))),d.default.createElement(b,{tab:"权限",key:"promise"},d.default.createElement(s.default,{type:t,isBase:n,roleDetail:r}))))}},743:function(e,t,n){"use strict";var r=n(19),a=n(45);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n(81));n(62);var u=r(n(41));n(43);var i=r(n(18)),o=r(n(152));n(51);var c=r(n(29)),d=r(n(197)),f=r(n(35)),s=r(n(82)),p=r(n(42)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(0)),v=n(666),g=n(90);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,f.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=(0,g.inject)("systemRoleStore")((0,g.observer)((function(e){var t=e.visible,n=e.handleOk,r=e.handleCancel,a=e.allSelectIds,f=e.roleType,g=e.domainId,y=e.selectedRowKeys,b=e.setSelectedRowKeys,O=e.systemRoleStore,E=O.findDmUserPage,w=O.findUserPage,P=(0,m.useState)([]),j=(0,p.default)(P,2),_=j[0],k=j[1],x={pageSize:6,currentPage:1},S=(0,m.useState)({}),R=(0,p.default)(S,2),M=R[0],I=R[1],C=(0,m.useState)({pageParam:x}),D=(0,p.default)(C,2),N=D[0],A=D[1];(0,m.useEffect)((function(){"project"!==f&&L().then((function(e){var t;if(0===e.code&&(I({currentPage:e.data.currentPage,totalPage:e.data.totalPage,totalRecord:e.data.totalRecord}),null!==(t=e.data)&&void 0!==t&&t.dataList)){var n=e.data.dataList;k("system"===f?n:n.map((function(e){return e.user})))}}))}),[N]);var L=function(){var e=(0,s.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("domain"!==f){e.next=4;break}return e.next=3,E(h(h({},N),{},{domainId:g}));case 3:return e.abrupt("return",e.sent);case 4:if("system"!==f){e.next=8;break}return e.next=7,w(N);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(e){return a&&a.some((function(t){return t===e.id}))},T={selectedRowKeys:y,onSelectAll:function(e,t,n){var r=n.map((function(e){return e&&e.id})).filter(Boolean);if(e){var a=Array.from(new Set([].concat((0,d.default)(r),(0,d.default)(y))));b(a)}else{var l=y.filter((function(e){return!r.includes(e)}));b(l)}},onSelect:function(e){return W(e)},getCheckboxProps:function(e){return{disabled:B(e)}}},W=function(e){B(e)||(y.indexOf(e.id)>=0?y.splice(y.indexOf(e.id),1):y.push(e.id),b((0,d.default)(y)))},z=[{title:"姓名",dataIndex:"nickname",key:"nickname",width:"25%",ellipsis:!0,render:function(e,t){return m.default.createElement(c.default,null,m.default.createElement(v.Profile,{userInfo:t}),e)}},{title:"用户名",dataIndex:"name",key:"name",width:"25%",ellipsis:!0,render:function(e){return e||"--"}},{title:"手机号",dataIndex:"phone",key:"phone",width:"25%",ellipsis:!0,render:function(e){return e||"--"}},{title:"邮箱",dataIndex:"email",key:"email",width:"25%",ellipsis:!0,render:function(e){return e||"--"}}];return m.default.createElement(v.BaseModal,{title:"添加用户",visible:t,onCancel:r,onOk:n,width:800,destroyOnClose:!0},m.default.createElement("div",null,m.default.createElement(i.default,{placeholder:"姓名、用户名、手机号、邮箱",style:{width:240},onPressEnter:function(e){return function(e){var t=h(h({},N),{},{accent:e.target.value,pageParam:x});A(t)}(e)},prefix:m.default.createElement(o.default,{style:{fontSize:"var(--thoughtware-icon-size-16)"}})}),m.default.createElement("div",{style:{paddingTop:10}},m.default.createElement(u.default,{columns:z,dataSource:_,rowSelection:T,onRow:function(e){return{onClick:function(){return W(e)}}},rowKey:function(e){return e.id},pagination:!1}),m.default.createElement(v.Page,{currentPage:N.pageParam.currentPage,changPage:function(e){var t=h(h({},N),{},{pageParam:{pageSize:6,currentPage:e}});A(t)},page:M}))))})))},744:function(e,t,n){"use strict";var r=n(19),a=n(45);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(308);var l=r(n(223));n(43);var u=r(n(18)),i=r(n(152)),o=r(n(42)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(0)),d=n(666),f=n(90);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}t.default=(0,f.inject)("systemRoleStore")((0,f.observer)((function(e){var t=e.visible,n=e.allSelectIds,r=e.handleOk,a=e.handleCancel,f=e.selectedRowKeys,s=e.setSelectedRowKeys,p=e.systemRoleStore.findOrgaTree,m=(0,c.useState)({}),v=(0,o.default)(m,2),g=v[0],y=v[1],b=(0,c.useState)([]),h=(0,o.default)(b,2),O=h[0],E=h[1];(0,c.useEffect)((function(){j()}),[g]);var w,P,j=function(){p(g).then((function(e){0===e.code&&E((null==e?void 0:e.data)||[])}))};return c.default.createElement(d.BaseModal,{width:500,visible:t,title:"添加部门",onOk:r,onCancel:a},c.default.createElement(u.default,{placeholder:"名称",style:{width:240},onPressEnter:function(e){return function(e){y({orgaName:e.target.value})}(e)},prefix:c.default.createElement(i.default,{style:{fontSize:"var(--thoughtware-icon-size-16)"}})}),c.default.createElement("div",{className:"thoughtware_privilege_orga_add_item"},c.default.createElement(l.default,{checkable:!0,blockNode:!0,defaultExpandParent:!0,checkedKeys:f,defaultExpandedKeys:["111111"],treeData:(w=O,P=[],function e(t,r){t.forEach((function(t,a){var l,u={key:t.orgaId,disabled:(l=t,n&&n.some((function(e){return e===l.orgaId}))),title:t.orgaName,children:[]};r.push(u),t.children&&t.children.length>0&&e(t.children,r[a].children)}))}(w,P),P),onCheck:function(e,t){t.checkedNodes;s(e)}})))})))},745:function(e,t,n){"use strict";var r=n(19),a=n(45);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(62);var l=r(n(41));n(43);var u=r(n(18)),i=r(n(152)),o=r(n(197)),c=r(n(42)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(0)),f=n(666),s=n(90);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}t.default=(0,s.inject)("systemRoleStore")((0,s.observer)((function(e){var t=e.visible,n=e.handleOk,r=e.handleCancel,a=e.allSelectIds,s=e.selectedRowKeys,p=e.setSelectedRowKeys,m=e.systemRoleStore.findUserGroupList,v=(0,d.useState)({}),g=(0,c.default)(v,2),y=g[0],b=g[1],h=(0,d.useState)([]),O=(0,c.default)(h,2),E=O[0],w=O[1];(0,d.useEffect)((function(){P()}),[y]);var P=function(){m(y).then((function(e){0===e.code&&w(e.data)}))},j=function(e){return a&&a.some((function(t){return t===e.id}))},_={selectedRowKeys:s,onSelectAll:function(e,t,n){var r=n.map((function(e){return e&&e.id})).filter(Boolean);if(e){var a=Array.from(new Set([].concat((0,o.default)(r),(0,o.default)(s))));p(a)}else{var l=s.filter((function(e){return!r.includes(e)}));p(l)}},onSelect:function(e){return k(e)},getCheckboxProps:function(e){return{disabled:j(e)}}},k=function(e){j(e)||(s.indexOf(e.id)>=0?s.splice(s.indexOf(e.id),1):s.push(e.id),p((0,o.default)(s)))};return d.default.createElement(f.BaseModal,{title:"添加用户组",visible:t,onCancel:r,onOk:n,width:500,destroyOnClose:!0},d.default.createElement("div",null,d.default.createElement(u.default,{placeholder:"名称",style:{width:240},onPressEnter:function(e){return function(e){b({name:e.target.value})}(e)},prefix:d.default.createElement(i.default,{style:{fontSize:"var(--thoughtware-icon-size-16)"}})}),d.default.createElement("div",{style:{paddingTop:10}},d.default.createElement(l.default,{columns:[{title:"名称",dataIndex:"name",key:"name",width:"70%",ellipsis:!0,render:function(e){return e||"--"}},{title:"类型",dataIndex:"group",key:"group",width:"30%",ellipsis:!0,render:function(e){return"system"===e?"内置":"自定义"}}],dataSource:E,rowSelection:_,onRow:function(e){return{onClick:function(){return k(e)}}},rowKey:function(e){return e.id},pagination:!1}))))})))},773:function(e,t,n){"use strict";n.r(t)},777:function(e,t,n){"use strict";var r=n(710),a=n.n(r),l=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function u(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=e.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(t.name=n[1],(a.a[n[1]]||"/"===e.charAt(e.length-2))&&(t.voidElement=!0),t.name.startsWith("!--"))){var r=e.indexOf("--\x3e");return{type:"comment",comment:-1!==r?e.slice(4,r):""}}for(var u=new RegExp(l),i=null;null!==(i=u.exec(e));)if(i[0].trim())if(i[1]){var o=i[1].trim(),c=[o,""];o.indexOf("=")>-1&&(c=o.split("=")),t.attrs[c[0]]=c[1],u.lastIndex--}else i[2]&&(t.attrs[i[2]]=i[3].trim().substring(1,i[3].length-1));return t}var i=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,o=/^\s*$/,c=Object.create(null);function d(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(e){var t=[];for(var n in e)t.push(n+'="'+e[n]+'"');return t.length?" "+t.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(d,"")+"</"+t.name+">";case"comment":return e+"\x3c!--"+t.comment+"--\x3e"}}var f={parse:function(e,t){t||(t={}),t.components||(t.components=c);var n,r=[],a=[],l=-1,d=!1;if(0!==e.indexOf("<")){var f=e.indexOf("<");r.push({type:"text",content:-1===f?e:e.substring(0,f)})}return e.replace(i,(function(i,c){if(d){if(i!=="</"+n.name+">")return;d=!1}var f,s="/"!==i.charAt(1),p=i.startsWith("\x3c!--"),m=c+i.length,v=e.charAt(m);if(p){var g=u(i);return l<0?(r.push(g),r):((f=a[l]).children.push(g),r)}if(s&&(l++,"tag"===(n=u(i)).type&&t.components[n.name]&&(n.type="component",d=!0),n.voidElement||d||!v||"<"===v||n.children.push({type:"text",content:e.slice(m,e.indexOf("<",m))}),0===l&&r.push(n),(f=a[l-1])&&f.children.push(n),a[l]=n),(!s||n.voidElement)&&(l>-1&&(n.voidElement||n.name===i.slice(2,-1))&&(l--,n=-1===l?r:a[l]),!d&&"<"!==v&&v)){f=-1===l?r:a[l].children;var y=e.indexOf("<",m),b=e.slice(m,-1===y?void 0:y);o.test(b)&&(b=" "),(y>-1&&l+f.length>=0||" "!==b)&&f.push({type:"text",content:b})}})),r},stringify:function(e){return e.reduce((function(e,t){return e+d("",t)}),"")}};t.a=f},789:function(e,t,n){"use strict";var r=n(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(790));t.default=a.default},790:function(e,t,n){"use strict";var r=n(19),a=n(45);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(70);var l=r(n(44));n(73);var u=r(n(36));n(62);var i=r(n(41)),o=r(n(136)),c=r(n(35));n(103);var d=r(n(59)),f=r(n(505));n(51);var s=r(n(29));n(303);var p=r(n(118)),m=r(n(42)),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=l?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(0)),g=n(90),y=n(46),b=r(n(738)),h=r(n(739)),O=n(153),E=n(666);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,c.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(773);t.default=(0,g.inject)(O.SYSTEM_ROLE_STORE)((0,g.observer)((function(e){var t=e.systemRoleStore,n=e.isBase,r=void 0!==n&&n,a=(0,y.useTranslation)().t,c=t.findRolePageAndRoleUserNumber,g=t.rolePage,O=t.deleteRoleAction,w=t.privilegeSystemRole,P=t.setDefaultRoleAction,_=(0,v.useState)(!1),k=(0,m.default)(_,2),x=k[0],S=k[1],R=(0,v.useState)(null),M=(0,m.default)(R,2),I=M[0],C=M[1],D=(0,v.useState)({pageParam:{pageSize:13,currentPage:1}}),N=(0,m.default)(D,2),A=N[0],L=N[1];(0,v.useEffect)((function(){B()}),[A]);var B=function(){c(A)},T=[{title:"角色名称",dataIndex:"name",width:"40%",ellipsis:!0,render:function(e,t){var n=t.businessType,r=t.defaultRole;return v.default.createElement(s.default,null,v.default.createElement("div",{className:"thoughtware_system_role_name",onClick:function(){return F(t)}},e),1===r&&v.default.createElement(p.default,{color:"#87d068"},"默认"),1===n&&v.default.createElement(p.default,null,"管理员"),2===n&&v.default.createElement(p.default,null,"超级管理员"))}},{title:"成员数",dataIndex:"roleUserNumber",width:"25%",ellipsis:!0,render:function(e){return"".concat(e,"人")}},{title:"类型",dataIndex:"group",width:"26%",ellipsis:!0,render:function(e){return"system"===e?"内置":a("privilege-role.custom")}},{title:"操作",dataIndex:"action",render:function(e,t){return r?v.default.createElement(s.default,{size:"middle"},0===t.defaultRole&&v.default.createElement(d.default,{title:"设置默认"},v.default.createElement(f.default,{onClick:function(){return z(t)},style:{fontSize:"var(--thoughtware-icon-size-16)"}})),v.default.createElement(E.ListAction,{del:function(){return W(t.id)}})):v.default.createElement(s.default,{size:"middle"},0===t.defaultRole&&v.default.createElement(d.default,{title:"设置默认"},v.default.createElement(f.default,{onClick:function(){return z(t)},style:{fontSize:"var(--thoughtware-icon-size-16)"}})),0===t.businessType&&"system"!==t.group&&v.default.createElement(E.ListAction,{del:function(){return W(t.id)}}))}}],W=function(e){O(e).then((function(e){e.code||B()}))},z=function(e){P(e).then((function(e){e.code||B()}))},K=function(){S(!0)},F=function(e){C(e)};return v.default.createElement(l.default,{className:"thoughtware_system_role"},v.default.createElement(u.default,{xs:{span:"24"},sm:{span:"24"},md:{span:"24"},lg:{span:"24"},xl:{span:"18",offset:"3"},xxl:{span:"18",offset:"3"}},I?v.default.createElement(h.default,{isBase:r,roleDetailParams:I,setDetail:C,findRole:B,roleType:"system"}):v.default.createElement("div",{className:"thoughtware_system_role-content"},v.default.createElement(E.BreadCrumb,{firstItem:"权限"},r?v.default.createElement(E.Btn,{icon:v.default.createElement(o.default,null),onClick:function(){return K()},title:a("privilege-role.addSystemRole")}):v.default.createElement(E.Btn,{icon:v.default.createElement(o.default,null),type:"primary",onClick:function(){return K()},title:a("privilege-role.addRole")})),v.default.createElement(i.default,{columns:T,dataSource:w,rowKey:function(e){return e.id},pagination:!1}),v.default.createElement(E.Page,{currentPage:A.pageParam.currentPage,changPage:function(e){L(j(j({},A),{},{pageParam:{pageSize:12,currentPage:e}}))},page:g}))),v.default.createElement(b.default,{visible:x,setVisible:S,isBase:r,findRole:B,urlType:"system"}))})))}}]);