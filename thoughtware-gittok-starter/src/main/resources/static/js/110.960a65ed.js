(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{1217:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),a=r(617),i=r(618),c=r(619),u=r(620),s=r(621),l=r(622),m=r(59),f=r(1103),p=r(691),d=r(7),y="/Users/limingliang/xcode-xpack/web/thoughtware-gittok-ui/src/repository/navigator/RepositoryAside.js";function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.default=Object(m.inject)("systemRoleStore","repositoryStore")(Object(m.observer)((function(e){var t=e.match,r=e.repositoryStore,m=e.systemRoleStore,N=r.findRepositoryPage,g=r.repositoryInfo,j=r.setRepositoryInfo,v=r.findRepositoryByAddress,_=r.findRepositoryAuth,O=m.getInitProjectPermissions,w=t.params.namespace,I=t.params.name,S="".concat(t.params.namespace,"/").concat(t.params.name),E=h(Object(n.useState)(!0),2),A=E[0],R=E[1],P=h(Object(n.useState)([]),2),k=P[0],B=P[1];Object(n.useEffect)((function(){return v(S).then((function(t){0===t.code&&(t.data?(_(t.data.rpyId).then((function(t){0===t.code&&"false"===t.data&&e.history.push("/repository")})),N({pageParam:{currentPage:1,pageSize:15},userId:Object(d.getUser)().userId}).then((function(e){if(0===e.code){var r=e.data.dataList.filter((function(e){return e.rpyId!==t.data.rpyId}));r.unshift(t.data),B(r)}}))):e.history.push("/repository"))})),function(){j("")}}),[]),Object(n.useEffect)((function(){v(w+"/"+I).then((function(t){var r;0===t.code?(O(Object(d.getUser)().userId,t.data.rpyId,"public"===(null===(r=t.data)||void 0===r?void 0:r.rules)),R(!1)):9e3===t.code&&e.history.push("/".concat(w+"/"+I,"/404"))}))}),[S]);var U=[{id:"/repository/".concat(w,"/").concat(I),title:"Code",icon:o.a.createElement(a.a,{__source:{fileName:y,lineNumber:91,columnNumber:18}})},{id:"/repository/".concat(S,"/commits/").concat(g&&g.defaultBranch?g.defaultBranch:0),title:"Commits",icon:o.a.createElement(i.a,{__source:{fileName:y,lineNumber:96,columnNumber:19}})},{id:"/repository/".concat(S,"/branch"),title:"Branch",icon:o.a.createElement(c.a,{__source:{fileName:y,lineNumber:101,columnNumber:19}})},{id:"/repository/".concat(S,"/tag"),title:"标签",icon:o.a.createElement(u.a,{__source:{fileName:y,lineNumber:106,columnNumber:19}})},{id:"/repository/".concat(S,"/merge_requests"),title:"合并请求",icon:o.a.createElement(s.a,{__source:{fileName:y,lineNumber:111,columnNumber:19}})},{id:"/repository/".concat(S,"/scanPlay"),title:"代码扫描",icon:o.a.createElement(l.a,{__source:{fileName:y,lineNumber:116,columnNumber:19}})}];return A?o.a.createElement(p.a,{__source:{fileName:y,lineNumber:122,columnNumber:16}}):o.a.createElement(f.a,b({},e,{firstRouters:U,list:k,info:g,repositoryAddress:S,asideType:"repository",__source:{fileName:y,lineNumber:125,columnNumber:13}}))})))}}]);